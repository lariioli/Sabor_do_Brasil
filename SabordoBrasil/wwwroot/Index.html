<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sabor do Brasil</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.12.1/font/bootstrap-icons.min.css" />
  <link rel="stylesheet" href="sabor.css" />
</head>

<body>
  <main>
    <div class="container-fluid">
      <div class="row min-vh-100">
        <div id="perfilArea" class="col-md-2 sidebar py-4 text-center">
          <img src="img/logo/logo_sabor_do_brasil.png" alt="Logo" class="logo" />
          <h5 class="mt-2">Sabor do Brasil</h5>
          <div class="linha-laranja"></div>
          <p><strong>9</strong><br />Quantidade Likes</p>
          <p><strong>12</strong><br />Quantidade Dislikes</p>
        </div>

        <div class="col-md-8 main-content py-3">
          <h5 class="text-center fw-bold text-black">Publicações</h5>

          <div class="publicacao">
            <h6 class="fw-bold">Título do prato 01</h6>
            <img src="img/publicacao/publicacao01.png" alt="Prato 01" />
            <div class="d-flex justify-content-between mt-1">
              <small>Local 01</small>
              <small>Maceió - AL</small>
            </div>
            <div class="mt-2">
              <i class="bi bi-hand-thumbs-up" onclick="mostrarLogin()"></i> 2
              <i class="bi bi-hand-thumbs-down" onclick="mostrarLogin()"></i> 1
              <i class="bi bi-chat" onclick="mostrarLogin()"></i> 4
            </div>
          </div>

          <div class="publicacao mt-4">
            <h6 class="fw-bold">Título do prato 02</h6>
            <img src="img/publicacao/publicacao02.png" alt="Prato 02" />
            <div class="d-flex justify-content-between mt-1">
              <small>Local 02</small>
              <small>Maceió - AL</small>
            </div>
            <div class="mt-2">
              <i class="bi bi-hand-thumbs-up" onclick="mostrarLogin()"></i> 9
              <i class="bi bi-hand-thumbs-down" onclick="mostrarLogin()"></i> 1
              <i class="bi bi-chat" onclick="mostrarLogin()"></i> 10
            </div>
          </div>

          <div class="publicacao mt-4">
            <h6 class="fw-bold">Título do prato 03</h6>
            <img src="img/publicacao/publicacao01.png" alt="Prato 03" />
            <div class="d-flex justify-content-between mt-1">
              <small>Local 03</small>
              <small>Maceió - AL</small>
            </div>
            <div class="mt-2">
              <i class="bi bi-hand-thumbs-up" onclick="mostrarLogin()"></i> 2
              <i class="bi bi-hand-thumbs-down" onclick="mostrarLogin()"></i> 1
              <i class="bi bi-chat" onclick="mostrarLogin()"></i> 2
            </div>
          </div>
        </div>

        <div class="col-md-2 login-area d-flex align-items-start justify-content-center pt-4">
          <button class="btn-login" onclick="mostrarLogin()">Entrar</button>
        </div>
      </div>
    </div>
  </main>

  <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-4">
        <h5 class="text-center mb-3">Login</h5>
        <input id="emailInput" type="email" class="form-control mb-2" placeholder="Digite seu e-mail" />
        <input id="senhaInput" type="password" class="form-control mb-3" placeholder="Digite sua senha" />
        <div id="erroLogin" class="text-danger small mb-2" style="display:none;">Usuário ou senha incorreto</div>
        <div class="d-flex justify-content-between align-items-center">
          <button class="btn btn-cancelar" data-bs-dismiss="modal">Cancelar</button>
          <small class="ms-2">Não tem uma conta? <a href="#" onclick="mostrarCadastro()">Cadastre-se</a></small>
          <button class="btn btn-entrar" onclick="validarLogin()">Entrar</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="cadastroModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-4">
        <h5 class="text-center mb-3">Cadastro</h5>
        <input id="cadastroNome" type="text" class="form-control mb-2" placeholder="Nome de usuário" />
        <input id="cadastroEmail" type="email" class="form-control mb-2" placeholder="E-mail" />
        <input id="cadastroSenha" type="password" class="form-control mb-2" placeholder="Senha" />
        <input id="cadastroFoto" type="file" accept="image/*" class="form-control mb-3" />
        <div class="d-flex justify-content-between">
          <button class="btn btn-cancelar" data-bs-dismiss="modal">Cancelar</button>
          <button class="btn btn-entrar" onclick="salvarCadastro()">Salvar</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="loginSuccessModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content border-success">
        <div class="modal-header bg-success text-white">
          <h5 class="modal-title">Login Bem-sucedido</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
        </div>
        <div class="modal-body">
          <div class="card border-success">
            <div class="card-body text-success">
              <h5 class="card-title">Login realizado com sucesso</h5>
              <p class="card-text">Você será redirecionado em instantes.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="footer-custom">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-sm">
          <h5>Sabor do Brasil</h5>
        </div>
        <div class="col-sm text-center">
          <i class="bi bi-instagram icone-svg-footer mx-2"></i>
          <i class="bi bi-twitter-x icone-svg-footer mx-2"></i>
          <i class="bi bi-whatsapp icone-svg-footer mx-2"></i>
          <i class="bi bi-globe icone-svg-footer mx-2"></i>
        </div>
        <div class="col-sm text-end">
          <h5>Copyright - 2024</h5>
        </div>
      </div>
    </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

  <script>
    function mostrarLogin() {
      const modal = new bootstrap.Modal(document.getElementById('loginModal'));
      document.getElementById('emailInput').classList.remove('input-error');
      document.getElementById('senhaInput').classList.remove('input-error');
      document.getElementById('erroLogin').style.display = 'none';
      modal.show();
    }

    function mostrarCadastro() {
      const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
      loginModal.hide();
      const cadastroModal = new bootstrap.Modal(document.getElementById('cadastroModal'));
      cadastroModal.show();
    }

    function salvarCadastro() {
      const nome = document.getElementById('cadastroNome').value;
      const email = document.getElementById('cadastroEmail').value;
      const senha = document.getElementById('cadastroSenha').value;
      const fotoInput = document.getElementById('cadastroFoto');

      if (!nome || !email || !senha) {
        alert('Preencha todos os campos obrigatórios.');
        return;
      }

      const file = fotoInput.files[0];

      if (file) {
        const reader = new FileReader();
        reader.onload = function (e) {
          const fotoBase64 = e.target.result;
          const usuario = { nome, email, senha, foto: fotoBase64 };
          localStorage.setItem('usuario', JSON.stringify(usuario));
          alert('Cadastro realizado com sucesso!');
          const cadastroModal = bootstrap.Modal.getInstance(document.getElementById('cadastroModal'));
          cadastroModal.hide();
        };
        reader.readAsDataURL(file);
      } else {
        alert('Selecione uma foto para continuar.');
      }
    }

    function validarLogin() {
      const emailInput = document.getElementById('emailInput');
      const senhaInput = document.getElementById('senhaInput');
      const erro = document.getElementById('erroLogin');

      emailInput.classList.remove('input-error');
      senhaInput.classList.remove('input-error');
      erro.style.display = 'none';

      const usuarioSalvo = JSON.parse(localStorage.getItem('usuario'));

      if (
        usuarioSalvo &&
        emailInput.value === usuarioSalvo.email &&
        senhaInput.value === usuarioSalvo.senha
      ) {
        const loginModal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
        loginModal.hide();

        const successModal = new bootstrap.Modal(document.getElementById('loginSuccessModal'));
        successModal.show();

        setTimeout(() => {
          successModal.hide();
          mostrarPerfil(usuarioSalvo);
        }, 2000);
      } else {
        if (!emailInput.value) emailInput.classList.add('input-error');
        if (!senhaInput.value) senhaInput.classList.add('input-error');
        erro.style.display = 'block';
      }
    }

    function mostrarPerfil(usuario) {
      const sidebar = document.getElementById('perfilArea');
      sidebar.innerHTML = `
        <img src="${usuario.foto}" alt="Foto de Perfil" class="logo rounded-circle" />
        <h5 class="mt-2">${usuario.nome}</h5>
        <div class="linha-laranja"></div>
        <p><strong>9</strong><br />Quantidade Likes</p>
        <p><strong>12</strong><br />Quantidade Dislikes</p>
      `;
    }
  </script>
</body>

</html>
